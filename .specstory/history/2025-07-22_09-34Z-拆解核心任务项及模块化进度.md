<!-- Generated by SpecStory -->

# 拆解核心任务项及模块化进度 (2025-07-22 09:34Z)

_**User**_

根据 @PRD.md 拆解核心任务项及进度，尽量模块化拆分，保存至 TASK.md 

---

_**Assistant**_

<think><details><summary>Thought Process</summary>
**Analyzing the Requirements**

I've started by carefully reviewing the `PRD.md` file to grasp the project's core features, like the API Endpoint Indexing, and identify its tasks. My immediate plan involves dissecting the `PRD.md` into individual, manageable tasks to track progress effectively, for creating the TASK.md file.


**Outlining the Project Tasks**

I've begun decomposing the features outlined in `PRD.md` into actionable tasks for `TASK.md`. I am structuring the file around the main features: API Endpoint Indexing, Quick Search and Navigation, and the API View Sidebar. Each feature will have sub-tasks with Markdown checkboxes for tracking progress. I plan to start with the core components of each feature first.


**Detailing the Initial Tasks**

I've started defining the specific tasks within each feature. I'm breaking down "API Endpoint Indexing" into subtasks like file scanning and source code parsing, with an initial investigation into Java/Kotlin AST parsing libraries. I'm leaning towards a strategy based on VS Code API for file watching, with a focus on incremental updates. The project's setup tasks, such as creating the skeleton and setting up build scripts, are already underway in TASK.md.


**Formulating the Task Structure**

I'm refining the task breakdown within `TASK.md`, adding details to the "File Scanning and Monitoring" and "Source Code Parsing" sections. This includes specifying the use of `workspace.findFiles` for file discovery and exploring JS/WASM-compatible AST parsing libraries. The structure will now incorporate task dependencies to guide the development process effectively, and reflect the information gathered from the `PRD.md` file.


**Creating the TASK.md Structure**

I've taken the core features from `PRD.md` to structure `TASK.md`, planning a phased MVP approach. Each feature, API Endpoint Indexing, Quick Search, and Navigation, will have sub-tasks with checkboxes. I'm breaking down API Endpoint Indexing into scanning, parsing, annotation extraction, and URL construction tasks, with an emphasis on initial setup and progress tracking.


**Refining Task Breakdown**

I'm now finalizing the task structure. I'm incorporating the "Phase" concept to denote the MVP scope and future enhancements, using Markdown checkboxes to track each task's progress. The structure will be based on the core features outlined in the PRD: API Endpoint Indexing, Quick Search, Navigation and the API View Sidebar. I'm including task dependencies for better development organization, and focusing on essential components for initial implementation and testing within `TASK.md`.


</details></think>

---

Okay, I will break down the core tasks from `PRD.md` and save them into a new file named `TASK.md`. This file will provide a structured overview of the project, divided into modular tasks with progress tracking.

---

```diff
- 
+ # API Navigator - 任务清单
+ 
+ 根据 `PRD.md` 文档，我们将核心开发任务拆解如下。
+ 
+ ## 里程碑 1: 核心功能 MVP (V1)
+ 
+ 此阶段的目标是实现一个可用的基本版本，包含最核心的 API 索引和搜索跳转功能。
+ 
+ ### 1. 项目设置与基础架构
+ 
+ - [ ] **任务 1.1**: 初始化 VS Code 插件项目。
+   - [ ] 创建标准的 VS Code 插件目录结构。
+   - [ ] 配置 `package.json`，包括名称、版本、激活事件等。
+   - [ ] 设置 TypeScript 编译环境 (`tsconfig.json`)。
+   - [ ] 配置 Webpack 或类似的打包工具。
+ - [ ] **任务 1.2**: 设计核心数据模型。
+   - [ ] 定义 `ApiEndpoint` 接口/类，用于存储单个 API 的信息（HTTP 方法、URL、文件路径、行号、类/方法名）。
+   - [ ] 设计索引管理器 `IndexManager`，负责存储和查询所有 `ApiEndpoint`。
+ 
+ ### 2. F1: API 端点索引
+ 
+ - [ ] **任务 2.1**: 文件扫描与监控。
+   - [ ] 实现 `workspace.findFiles` 逻辑，在插件启动时扫描所有 `.java` 和 `.kt` 文件。
+   - [ ] 设置文件监听器 (`workspace.onDid...`) 以便在文件变更、创建或删除时触发增量更新。
+ - [ ] **任务 2.2**: 源代码解析引擎。
+   - [ ] **调研**: 寻找一个轻量级的、适用于 Node.js 环境的 Java/Kotlin AST 解析库。
+   - [ ] **实现**: 封装一个 `ParserService`，能够接收文件内容并返回简化的 AST 结构（主要包含类、方法、注解信息）。
+ - [ ] **任务 2.3**: API 信息提取。
+   - [ ] 实现 Spring 注解的解析逻辑 (`@RequestMapping`, `@GetMapping` 等)。
+   - [ ] 实现 JAX-RS 注解的解析逻辑 (`@Path`, `@GET` 等)。
+   - [ ] 实现 Micronaut 注解的解析逻辑 (`@Controller`, `@Get` 等)。
+   - [ ] 实现类级别和方法级别路径的合并，生成完整的 URL。
+   - [ ] 准确提取路径参数（如 `/users/{id}`）。
+ 
+ ### 3. F2: 快速搜索与导航
+ 
+ - [ ] **任务 3.1**: 命令和快捷键注册。
+   - [ ] 在 `package.json` 中注册 `API Navigator: 搜索 API 端点` 命令。
+   - [ ] 绑定一个默认的、不易冲突的快捷键（如 `Ctrl+\`）。
+ - [ ] **任务 3.2**: 实现 Quick Pick 搜索界面。
+   - [ ] 调用 `window.createQuickPick` API。
+   - [ ] 实现搜索框输入的模糊匹配算法。
+   - [ ] 将搜索结果格式化，清晰地展示 HTTP 方法、URL 和源代码位置。
+ - [ ] **任务 3.3**: 实现跳转功能。
+   - [ ] 当用户从 Quick Pick 列表中选择一项时，获取其文件路径和行号。
+   - [ ] 调用 VS Code API 打开文件并将光标定位到指定位置。
+ 
+ ### 4. 非功能性需求
+ 
+ - [ ] **任务 4.1**: 性能与反馈。
+   - [ ] 确保首次全量索引时，在状态栏显示进度（例如 `Indexing APIs...`）。
+   - [ ] 确保文件解析和索引更新在后台执行，不阻塞 UI 主线程。
+ - [ ] **任务 4.2**: 准确性与健壮性。
+   - [ ] 编写单元测试，重点覆盖 URL 合并和参数解析的各种边界情况。
+   - [ ] 添加错误处理，优雅地处理文件解析失败或不支持的语法。
+ 
+ ---
+ 
+ ## 里程碑 2: 视图与体验增强 (V2)
+ 
+ 在核心功能稳定后，此阶段专注于提供更好的概览和交互体验。
+ 
+ ### 5. F3: API 视图侧边栏
+ 
+ - [ ] **任务 5.1**: 创建侧边栏视图。
+   - [ ] 在 `package.json` 中声明一个新的 Activity Bar 视图容器。
+   - [ ] 实现 `TreeDataProvider` 接口，将内存中的 API 索引数据提供给树状视图。
+ - [ ] **任务 5.2**: 视图交互。
+   - [ ] 实现树状结构，可按类名或模块进行分组。
+   - [ ] 点击树节点可直接跳转到对应的代码位置。
+   - [ ] 添加一个“刷新”按钮，允许用户手动触发全量索引。
+   - [ ] 为树节点添加右键菜单，提供“复制 URL”等便捷操作。
+ 
+ ---
+ 
+ ## 未来规划 (Backlog)
+ 
+ 这些是未来版本可能考虑的功能，当前优先级较低。
+ 
+ - [ ] **支持更多框架**: 调研并支持 Python (Flask/Django), Node.js (Express/NestJS) 等。
+ - [ ] **编辑器内代码补全**: 在字符串中输入 URL 时提供自动补全建议。
+ - [ ] **REST 客户端集成**: 与 Thunder Client 或其他 REST 插件集成，提供“直接发送请求”的功能。
+ - [ ] **文档生成**: 一键生成简单的 Markdown API 文档。 
```

---

<think><details><summary>Thought Process</summary>
**Mapping the Project Tasks**

I've successfully created the `TASK.md` file. It now details all tasks derived from `PRD.md`, along with milestones and future plans. The `edit_file` tool call worked perfectly!


**Declaring Task Completion**

I've finished creating the `TASK.md` file. It includes the detailed task breakdown, milestones, and future plans, all derived from `PRD.md`. The file is ready and can be found where I was instructed to place it.


</details></think>

---

I have created the `TASK.md` file with a detailed breakdown of the core tasks based on your PRD. You can find it in the root of the project. It outlines the milestones for V1 and V2, as well as a backlog for future features. Let me know what you'd like to work on first!

---

